### Unix

get the radio show length (in seconds)

    mdls *.mp3
    mdls *.mp3 | grep kMDItemDurationSeconds
    mdls *.mp3 | grep kMDItemDurationSeconds | cut -d '=' -f 2
    mdls *.mp3 | grep kMDItemDurationSeconds | cut -d '=' -f 2 | cut -c 2-
    mdls *.mp3 | grep kMDItemDurationSeconds | cut -d '=' -f 2 | cut -c 2- > duracion.csv


get the name of each episode

    mdls *.mp3 | grep kMDItemDisplayName
    mdls *.mp3 | grep kMDItemDisplayName | cut -d '=' -f 2
    mdls *.mp3 | grep kMDItemDisplayName | cut -d '=' -f 2 | cut -c 2-
    mdls *.mp3 | grep kMDItemDisplayName | cut -d '=' -f 2 | cut -c 2- > episodios.csv
    
    
  ### R
  
Dependencies
```{r}
library(stringr) 

```

Read the file with the radio show length (in seconds)
```{r}
segundos <- readLines("duracion.csv")
```
Read the file with the radio show date
```{r}
fechas <- readLines("episodios.csv")
```
Check both files have the same elements
```{r}
length(segundos) == length(fecha)
```

Split each element based on a pattern
```{r}
tmp <- str_split(fecha, "-cvradio")

tmp <- unlist(tmp)

```
Three episodes require manually edition.  
The date can be found 
# Correcciones manuales 
tmp[1] = "\"acienciacierta01122016"
tmp[3] = "\"acienciacierta22122016"
tmp[9] = "\"acienciacierta19012017"

str_subset(tmp, "acienciacierta")[1:10]

str_sub(str_subset(tmp, "acienciacierta"), -8, -1)



```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```




library(lubridate)
dmy(str_sub(str_subset(tmp, "acienciacierta"), -8, -1))

fechas <- dmy(str_sub(str_subset(tmp, "acienciacierta"), -8, -1))

weekdays(fechas)
table(weekdays(fechas))

library(ggplot2)
qplot(weekdays(fechas))

#wday(fechas, label = TRUE)
months.Date(fechas) 

sort(table(months.Date(fechas) ), decreasing = TRUE)


# Build a data frame
library(dplyr)
tibble(fecha = fechas, 
       segundos = as.numeric(readLines("duracion.csv"))) %>%
  mutate(minutos = segundos / 60) %>% 
  ggplot(aes(x = fecha, y = minutos)) +
  geom_point() + 
  geom_smooth(method = "lm", col = "steelblue") + 
  ggtitle("A ciencia cierta", "Antonio Rivera")


tibble(fecha = fechas, 
       segundos = as.numeric(readLines("duracion.csv"))) %>%
  mutate(minutos = segundos / 60) -> model


my_model = lm(data = model, minutos~fecha)
summary(my_model)
coefficients(my_model)
